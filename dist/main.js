(()=>{"use strict";let e=null;const t=document.querySelector("[data-project-tasks]");class n{constructor(e,t,n,c,o,s){this.id=e,this.description=t,this.dueDate=n,this.priority=c,this.projectId=o,this.projectName=s}}function c(){const t=i.find((e=>e.id===d));document.querySelector(".user-tasks").textContent="",null==d||"1"==d?i.forEach((e=>{e.projectTasks.forEach(((e,t)=>{o(e,t)}))})):t.projectTasks.forEach(((e,t)=>{o(e,t)})),console.log(i),function(){const t=document.querySelectorAll(".edit-task-btn"),o=document.getElementById("editTaskForm");t.forEach((t=>{t.addEventListener("click",(t=>{s().showEditTaskForm();const d=t.target.dataset.taskProjectId,a=i.find((e=>e.id===d));e=t.target.dataset.taskId;const r=a.projectTasks.find((t=>t.id===e));console.log("matchingProject:",a),console.log("selectedTask:",r);let l=r.id,u=r.description,m=r.dueDate,p=r.priority,k=r.projectName;document.getElementById("editTaskDescription").setAttribute("value",u),document.getElementById("editTaskDueDate").setAttribute("value",m),document.getElementById("editPriorityLevel").value=p;const y=k,E=document.querySelector("#editTaskProject");Array.from(E.options).find((e=>e.text===y)).selected=!0,o.addEventListener("submit",(e=>{const t=document.querySelector("#editTaskDescription"),o=document.querySelector("#editTaskDueDate"),s=document.querySelector("#editPriorityLevel"),d=document.getElementById("editTaskProject");if(e.preventDefault(),null==u||""===u)return;const a={description:t.value,dueDate:o.value,priority:s.value,projectId:d.value,projectName:d.options[d.selectedIndex].id},m=r;if(console.log("editProjectId:",d.value),console.log("selectedTask.projectId:",r.projectId),d.value!==r.projectId){const e=new n(l,t.value,o.value,s.value,d.value,d.options[d.selectedIndex].id),c=i.find((e=>e.id===d.value));c.projectTasks.push(e);const a=[];for(const e of c.projectTasks)a.find((t=>t.id===e.id))||a.push(e);c.projectTasks=a}else Object.assign(m,a);document.getElementById("taskForm").reset(),c()}))}))}))}(),document.querySelectorAll(".remove-task-btn").forEach((e=>{e.addEventListener("click",(t=>{const n=t.target.dataset.taskProjectId;i.find((e=>e.id===n)).projectTasks.splice(e.getAttribute("data"),1),c()}))}))}function o(t,n){const c=document.querySelector(".user-tasks"),o=document.createElement("div");o.classList.add("user-task"),o.dataset.taskId=t.id;const s=document.createElement("p");s.classList.add("project-title"),s.innerText=`${t.description}`,o.append(s);const d=document.createElement("p");d.classList.add("task-date"),d.innerText=`${t.dueDate}`,o.append(d);const a=document.createElement("p");a.classList.add("task-priority"),a.innerText=`${t.priority}`,o.append(a);const r=document.createElement("p");r.classList.add("project-folder"),r.innerText=`${t.projectName}`,o.append(r);const i=document.createElement("div");i.classList.add("task-btns"),o.append(i);const l=document.createElement("img");l.setAttribute("data",n),l.dataset.taskId=t.id,l.dataset.taskProjectId=t.projectId,l.classList.add("edit-task-btn"),l.src="./images/edit-button.svg",i.appendChild(l);const u=document.createElement("img");u.setAttribute("data",n),u.dataset.taskProjectId=t.projectId,u.classList.add("remove-task-btn"),u.src="./images/trash-can.svg",i.appendChild(u),t.id===e&&o.classList.add("selected-task"),c.append(o)}function s(){const e=document.getElementById("taskFormDispBtn"),t=(document.querySelectorAll(".edit-task-btn"),document.getElementById("task-submit-btn")),n=document.getElementById("edit-task-submit-btn"),c=document.getElementById("task-cancel-btn"),o=document.getElementById("edit-task-cancel-btn"),s=document.querySelector(".edit-task-modal"),d=document.querySelector(".new-task-modal"),a=document.querySelector(".overlay");function r(){d.classList.remove("active"),s.classList.remove("active"),a.classList.remove("active")}return e.onclick=function(){d.classList.add("active"),a.classList.add("active"),document.getElementById("taskDescription").focus()},t.onclick=r,n.onclick=r,a.onclick=r,c.addEventListener("click",(()=>{r(),document.getElementById("taskForm").reset()})),o.addEventListener("click",(()=>{r(),document.getElementById("editTaskForm").reset()})),{showEditTaskForm:function(){s.classList.add("active"),a.classList.add("active"),document.getElementById("editTaskDescription").focus()}}}t.addEventListener("click",(t=>{e=t.target.dataset.taskId,c()}));let d=null;const a=document.querySelector("[data-user-projects]"),r=document.querySelector(".all-tasks");let i=[];class l{constructor(e,t){this.id=e,this.projectTitle=t,this.projectTasks=[]}}function u(){const e=document.getElementById("taskProject"),t=document.getElementById("editTaskProject");a.textContent="",e.textContent="",t.textContent="",i.forEach(((e,t)=>{!function(e,t){const n=document.querySelector("[data-user-projects]"),c=document.createElement("div");c.classList.add("user-project"),c.setAttribute("id",`${e.projectTitle}`),c.dataset.projectId=e.id;const o=document.createElement("p");o.classList.add("project-title"),o.innerText=e.projectTitle,c.append(o);const s=document.createElement("img");s.setAttribute("data",t),s.classList.add("remove-project-btn"),s.src="./images/trash-can.svg",c.appendChild(s),e.id===d&&c.classList.add("selected"),n.append(c)}(e,t)})),i.forEach((t=>{let n=document.createElement("option");n.value=t.id,n.innerText=t.projectTitle,n.id=t.projectTitle,e.appendChild(n)})),i.forEach((e=>{let n=document.createElement("option");n.value=e.id,n.innerText=e.projectTitle,n.id=e.projectTitle,t.appendChild(n)})),document.querySelectorAll(".remove-project-btn").forEach((e=>{e.addEventListener("click",(()=>{i.splice(e.getAttribute("data"),1),u(),c()}))}))}if(a.addEventListener("click",(e=>{"div"===e.target.tagName.toLowerCase()&&(d=e.target.dataset.projectId,r.classList.remove("selected"),u(),c())})),r.addEventListener("click",(e=>{d="1",r.classList.add("selected"),u(),c()})),""==i){const e=new l("2","Default");i.push(e);const t=new n("3","Add a project to get started","Now","High","2","Default"),o=i.find((e=>"2"===e.id));o.projectTasks.push(t),u(),c()}!function(){const e=document.getElementById("newProjectBtn"),t=document.getElementById("project-submit-btn"),n=document.getElementById("project-cancel-btn");e.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="block",document.getElementById("newProjectBtn").style.display="none",document.getElementById("projectInput").focus()})),t.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block"})),n.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block",document.getElementById("projectForm").reset()}))}(),s(),function(){const e=document.querySelector("[data-new-project-form]"),t=document.querySelector("[data-new-project-input]");e.addEventListener("submit",(e=>{if(e.preventDefault(),null==t||""===t)return;let n=Date.now().toString();const c=new l(n,t.value);t.value=null,i.push(c),u()}))}(),function(){const e=document.getElementById("taskForm"),t=document.querySelector("#taskDescription"),o=document.querySelector("#taskDueDate"),s=document.querySelector("#priorityLevel"),d=document.getElementById("taskProject");e.addEventListener("submit",(e=>{e.preventDefault(),null!=t&&""!==t&&(!function(e,t,c,o,s,d){const a=new n(e,t,c,o,s,d);i.find((e=>e.id===s)).projectTasks.push(a)}(Date.now().toString(),t.value,o.value,s.value,d.value,d.options[d.selectedIndex].id),document.getElementById("taskForm").reset(),c())}))}()})();