(()=>{"use strict";let e=null;const t=document.querySelector("[data-project-tasks]");class n{constructor(e,t,n,c,s,d){this.id=e,this.description=t,this.dueDate=n,this.priority=c,this.projectId=s,this.projectName=d}}function c(){const e=r.find((e=>e.id===d));document.querySelector(".user-tasks").textContent="",null==d||"1"==d?r.forEach((e=>{e.projectTasks.forEach(((e,t)=>{s(e,t)}))})):e.projectTasks.forEach(((e,t)=>{s(e,t)})),editTask(),document.querySelectorAll(".remove-task-btn").forEach((e=>{e.addEventListener("click",(t=>{const n=t.target.dataset.taskProjectId;r.find((e=>e.id===n)).projectTasks.splice(e.getAttribute("data"),1),c()}))}))}function s(t,n){const c=document.querySelector(".user-tasks"),s=document.createElement("div");s.classList.add("user-task"),s.dataset.taskId=t.id;const d=document.createElement("p");d.classList.add("project-title"),d.innerText=`${t.description}`,s.append(d);const o=document.createElement("p");o.classList.add("task-date"),o.innerText=`${t.dueDate}`,s.append(o);const a=document.createElement("p");a.classList.add("task-priority"),a.innerText=`${t.priority}`,s.append(a);const r=document.createElement("p");r.classList.add("project-folder"),r.innerText=`${t.projectName}`,s.append(r);const i=document.createElement("div");i.classList.add("task-btns"),s.append(i);const l=document.createElement("img");l.setAttribute("data",n),l.dataset.taskId=t.id,l.dataset.taskProjectId=t.projectId,l.classList.add("edit-task-btn"),l.src="./images/edit-button.svg",i.appendChild(l);const u=document.createElement("img");u.setAttribute("data",n),u.dataset.taskProjectId=t.projectId,u.classList.add("remove-task-btn"),u.src="./images/trash-can.svg",i.appendChild(u),t.id===e&&s.classList.add("selected-task"),c.append(s)}t.addEventListener("click",(t=>{e=t.target.dataset.taskId,c(),console.log(e)}));let d=null;const o=document.querySelector("[data-user-projects]"),a=document.querySelector(".all-tasks");let r=[];class i{constructor(e,t){this.id=e,this.projectTitle=t,this.projectTasks=[]}}function l(){const e=document.getElementById("taskProject"),t=document.getElementById("editTaskProject");o.textContent="",e.textContent="",t.textContent="",r.forEach(((e,t)=>{!function(e,t){const n=document.querySelector("[data-user-projects]"),c=document.createElement("div");c.classList.add("user-project"),c.setAttribute("id",`${e.projectTitle}`),c.dataset.projectId=e.id;const s=document.createElement("p");s.classList.add("project-title"),s.innerText=e.projectTitle,c.append(s);const o=document.createElement("img");o.setAttribute("data",t),o.classList.add("remove-project-btn"),o.src="./images/trash-can.svg",c.appendChild(o),e.id===d&&c.classList.add("selected"),n.append(c)}(e,t)})),r.forEach((t=>{let n=document.createElement("option");n.value=t.id,n.innerText=t.projectTitle,n.id=t.projectTitle,e.appendChild(n)})),r.forEach((e=>{let n=document.createElement("option");n.value=e.id,n.innerText=e.projectTitle,n.id=e.projectTitle,t.appendChild(n)})),document.querySelectorAll(".remove-project-btn").forEach((e=>{e.addEventListener("click",(()=>{r.splice(e.getAttribute("data"),1),l(),c()}))}))}if(o.addEventListener("click",(e=>{"div"===e.target.tagName.toLowerCase()&&(d=e.target.dataset.projectId,a.classList.remove("selected"),l(),c())})),a.addEventListener("click",(e=>{d="1",a.classList.add("selected"),l(),c()})),""==r){const e=new i("2","Default");r.push(e);const t=new n("3","Add a project to get started","Now","High","2","Default"),s=r.find((e=>"2"===e.id));s.projectTasks.push(t),l(),c()}!function(){const e=document.getElementById("newProjectBtn"),t=document.getElementById("project-submit-btn"),n=document.getElementById("project-cancel-btn");e.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="block",document.getElementById("newProjectBtn").style.display="none",document.getElementById("projectInput").focus()})),t.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block"})),n.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block",document.getElementById("projectForm").reset()}))}(),function(){const e=document.getElementById("taskFormDispBtn"),t=(document.querySelectorAll(".edit-task-btn"),document.getElementById("task-submit-btn")),n=document.getElementById("edit-task-submit-btn"),c=document.getElementById("task-cancel-btn"),s=document.getElementById("edit-task-cancel-btn"),d=document.querySelector(".edit-task-modal"),o=document.querySelector(".new-task-modal"),a=document.querySelector(".overlay");function r(){o.classList.remove("active"),d.classList.remove("active"),a.classList.remove("active")}e.onclick=function(){o.classList.add("active"),a.classList.add("active"),document.getElementById("taskDescription").focus()},t.onclick=r,n.onclick=r,a.onclick=r,c.addEventListener("click",(()=>{r(),document.getElementById("taskForm").reset()})),s.addEventListener("click",(()=>{r(),document.getElementById("editTaskForm").reset()}))}(),function(){const e=document.querySelector("[data-new-project-form]"),t=document.querySelector("[data-new-project-input]");e.addEventListener("submit",(e=>{if(e.preventDefault(),null==t||""===t)return;let n=Date.now().toString();const c=new i(n,t.value);t.value=null,r.push(c),l()}))}(),function(){const e=document.getElementById("taskForm"),t=document.querySelector("#taskDescription"),s=document.querySelector("#taskDueDate"),d=document.querySelector("#priorityLevel"),o=document.getElementById("taskProject");e.addEventListener("submit",(e=>{e.preventDefault(),null!=t&&""!==t&&(!function(e,t,c,s,d,o){const a=new n(e,t,c,s,d,o);r.find((e=>e.id===d)).projectTasks.push(a)}(Date.now().toString(),t.value,s.value,d.value,o.value,o.options[o.selectedIndex].id),document.getElementById("taskForm").reset(),c())}))}()})();