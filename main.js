(()=>{"use strict";let e=null;const t=document.querySelector("[data-project-tasks]");class n{constructor(e,t,n,c,d,s){this.id=e,this.description=t,this.dueDate=n,this.priority=c,this.projectId=d,this.projectName=s}}function c(){const t=i.find((e=>e.id===o));document.querySelector(".user-tasks").textContent="",null==o||"1"==o?i.forEach((e=>{e.projectTasks.forEach(((e,t)=>{d(e,t)}))})):t.projectTasks.forEach(((e,t)=>{d(e,t)})),console.log(i),function(){const t=document.querySelectorAll(".edit-task-btn"),n=document.getElementById("editTaskForm");t.forEach((t=>{t.addEventListener("click",(t=>{s().showEditTaskForm();const d=t.target.dataset.taskProjectId,o=i.find((e=>e.id===d));e=t.target.dataset.taskId;const a=o.projectTasks.find((t=>t.id===e));let r=a.description,l=a.dueDate,u=a.priority,m=a.projectName;document.getElementById("editTaskDescription").setAttribute("value",r),document.getElementById("editTaskDueDate").setAttribute("value",l),document.getElementById("editPriorityLevel").value=u;const p=m,k=document.querySelector("#editTaskProject");Array.from(k.options).find((e=>e.text===p)).selected=!0,n.addEventListener("submit",(e=>{const t=document.querySelector("#editTaskDescription"),n=document.querySelector("#editTaskDueDate"),d=document.querySelector("#editPriorityLevel"),s=document.getElementById("editTaskProject");if(e.preventDefault(),null==r||""===r)return;const o={description:t.value,dueDate:n.value,priority:d.value,projectId:s.value,projectName:s.options[s.selectedIndex].id},i=a;Object.assign(i,o),document.getElementById("taskForm").reset(),c()}))}))}))}(),document.querySelectorAll(".remove-task-btn").forEach((e=>{e.addEventListener("click",(t=>{const n=t.target.dataset.taskProjectId;i.find((e=>e.id===n)).projectTasks.splice(e.getAttribute("data"),1),c()}))}))}function d(t,n){const c=document.querySelector(".user-tasks"),d=document.createElement("div");d.classList.add("user-task"),d.dataset.taskId=t.id;const s=document.createElement("p");s.classList.add("project-title"),s.innerText=`${t.description}`,d.append(s);const o=document.createElement("p");o.classList.add("task-date"),o.innerText=`${t.dueDate}`,d.append(o);const a=document.createElement("p");a.classList.add("task-priority"),a.innerText=`${t.priority}`,d.append(a);const r=document.createElement("p");r.classList.add("project-folder"),r.innerText=`${t.projectName}`,d.append(r);const i=document.createElement("div");i.classList.add("task-btns"),d.append(i);const l=document.createElement("img");l.setAttribute("data",n),l.dataset.taskId=t.id,l.dataset.taskProjectId=t.projectId,l.classList.add("edit-task-btn"),l.src="./images/edit-button.svg",i.appendChild(l);const u=document.createElement("img");u.setAttribute("data",n),u.dataset.taskProjectId=t.projectId,u.classList.add("remove-task-btn"),u.src="./images/trash-can.svg",i.appendChild(u),t.id===e&&d.classList.add("selected-task"),c.append(d)}function s(){const e=document.getElementById("taskFormDispBtn"),t=(document.querySelectorAll(".edit-task-btn"),document.getElementById("task-submit-btn")),n=document.getElementById("edit-task-submit-btn"),c=document.getElementById("task-cancel-btn"),d=document.getElementById("edit-task-cancel-btn"),s=document.querySelector(".edit-task-modal"),o=document.querySelector(".new-task-modal"),a=document.querySelector(".overlay");function r(){o.classList.remove("active"),s.classList.remove("active"),a.classList.remove("active")}return e.onclick=function(){o.classList.add("active"),a.classList.add("active"),document.getElementById("taskDescription").focus()},t.onclick=r,n.onclick=r,a.onclick=r,c.addEventListener("click",(()=>{r(),document.getElementById("taskForm").reset()})),d.addEventListener("click",(()=>{r(),document.getElementById("editTaskForm").reset()})),{showEditTaskForm:function(){s.classList.add("active"),a.classList.add("active"),document.getElementById("editTaskDescription").focus()}}}t.addEventListener("click",(t=>{e=t.target.dataset.taskId,c()}));let o=null;const a=document.querySelector("[data-user-projects]"),r=document.querySelector(".all-tasks");let i=[];class l{constructor(e,t){this.id=e,this.projectTitle=t,this.projectTasks=[]}}function u(){const e=document.getElementById("taskProject"),t=document.getElementById("editTaskProject");a.textContent="",e.textContent="",t.textContent="",i.forEach(((e,t)=>{!function(e,t){const n=document.querySelector("[data-user-projects]"),c=document.createElement("div");c.classList.add("user-project"),c.setAttribute("id",`${e.projectTitle}`),c.dataset.projectId=e.id;const d=document.createElement("p");d.classList.add("project-title"),d.innerText=e.projectTitle,c.append(d);const s=document.createElement("img");s.setAttribute("data",t),s.classList.add("remove-project-btn"),s.src="./images/trash-can.svg",c.appendChild(s),e.id===o&&c.classList.add("selected"),n.append(c)}(e,t)})),i.forEach((t=>{let n=document.createElement("option");n.value=t.id,n.innerText=t.projectTitle,n.id=t.projectTitle,e.appendChild(n)})),i.forEach((e=>{let n=document.createElement("option");n.value=e.id,n.innerText=e.projectTitle,n.id=e.projectTitle,t.appendChild(n)})),document.querySelectorAll(".remove-project-btn").forEach((e=>{e.addEventListener("click",(()=>{i.splice(e.getAttribute("data"),1),u(),c()}))}))}if(a.addEventListener("click",(e=>{"div"===e.target.tagName.toLowerCase()&&(o=e.target.dataset.projectId,r.classList.remove("selected"),u(),c())})),r.addEventListener("click",(e=>{o="1",r.classList.add("selected"),u(),c()})),""==i){const e=new l("2","Default");i.push(e);const t=new n("3","Add a project to get started","Now","High","2","Default"),d=i.find((e=>"2"===e.id));d.projectTasks.push(t),u(),c()}!function(){const e=document.getElementById("newProjectBtn"),t=document.getElementById("project-submit-btn"),n=document.getElementById("project-cancel-btn");e.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="block",document.getElementById("newProjectBtn").style.display="none",document.getElementById("projectInput").focus()})),t.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block"})),n.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block",document.getElementById("projectForm").reset()}))}(),s(),function(){const e=document.querySelector("[data-new-project-form]"),t=document.querySelector("[data-new-project-input]");e.addEventListener("submit",(e=>{if(e.preventDefault(),null==t||""===t)return;let n=Date.now().toString();const c=new l(n,t.value);t.value=null,i.push(c),u()}))}(),function(){const e=document.getElementById("taskForm"),t=document.querySelector("#taskDescription"),d=document.querySelector("#taskDueDate"),s=document.querySelector("#priorityLevel"),o=document.getElementById("taskProject");e.addEventListener("submit",(e=>{e.preventDefault(),null!=t&&""!==t&&(!function(e,t,c,d,s,o){const a=new n(e,t,c,d,s,o);i.find((e=>e.id===s)).projectTasks.push(a)}(Date.now().toString(),t.value,d.value,s.value,o.value,o.options[o.selectedIndex].id),document.getElementById("taskForm").reset(),c())}))}()})();