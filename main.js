(()=>{"use strict";let e=null;const t=document.querySelector("[data-project-tasks]");class c{constructor(e,t,c,n,s,o){this.id=e,this.description=t,this.dueDate=c,this.priority=n,this.projectId=s,this.projectName=o}}function n(){const t=i.find((e=>e.id===d));document.querySelector(".user-tasks").textContent="",null==d||"1"==d?i.forEach((e=>{e.projectTasks.forEach(((e,t)=>{s(e,t)}))})):t.projectTasks.forEach(((e,t)=>{s(e,t)})),console.log(i),function(){const t=document.querySelectorAll(".edit-task-btn"),s=document.getElementById("editTaskForm");t.forEach((t=>{t.addEventListener("click",(t=>{o().showEditTaskForm();const d=t.target.dataset.taskProjectId,a=i.find((e=>e.id===d));e=t.target.dataset.taskId;const r=a.projectTasks.find((t=>t.id===e));console.log("matchingProject:",a),console.log("selectedTask:",r);let l=r.id,u=r.description,m=r.dueDate,p=r.priority,k=r.projectName;document.getElementById("editTaskDescription").setAttribute("value",u),document.getElementById("editTaskDueDate").setAttribute("value",m),document.getElementById("editPriorityLevel").value=p;const y=k,E=document.querySelector("#editTaskProject");Array.from(E.options).find((e=>e.text===y)).selected=!0,s.addEventListener("submit",(e=>{const t=document.querySelector("#editTaskDescription"),s=document.querySelector("#editTaskDueDate"),o=document.querySelector("#editPriorityLevel"),d=document.getElementById("editTaskProject");if(e.preventDefault(),null==u||""===u)return;const m={description:t.value,dueDate:s.value,priority:o.value,projectId:d.value,projectName:d.options[d.selectedIndex].id},p=r;if(console.log("editProjectId:",d.value),console.log("selectedTask.projectId:",r.projectId),d.value!==r.projectId){const e=new c(l,t.value,s.value,o.value,d.value,d.options[d.selectedIndex].id),n=i.find((e=>e.id===d.value));n.projectTasks.push(e);const u=a.projectTasks.filter((e=>e!=r));a.projectTasks=u,a.projectTasks;const m=[];for(const e of n.projectTasks)m.find((t=>t.id===e.id))||m.push(e);n.projectTasks=m}else Object.assign(p,m);document.getElementById("taskForm").reset(),n()}))}))}))}(),document.querySelectorAll(".remove-task-btn").forEach((e=>{e.addEventListener("click",(t=>{const c=t.target.dataset.taskProjectId;i.find((e=>e.id===c)).projectTasks.splice(e.getAttribute("data"),1),n()}))}))}function s(t,c){const n=document.querySelector(".user-tasks"),s=document.createElement("div");s.classList.add("user-task"),s.dataset.taskId=t.id;const o=document.createElement("p");o.classList.add("project-title"),o.innerText=`${t.description}`,s.append(o);const d=document.createElement("p");d.classList.add("task-date"),d.innerText=`${t.dueDate}`,s.append(d);const a=document.createElement("p");a.classList.add("task-priority"),a.innerText=`${t.priority}`,s.append(a);const r=document.createElement("p");r.classList.add("project-folder"),r.innerText=`${t.projectName}`,s.append(r);const i=document.createElement("div");i.classList.add("task-btns"),s.append(i);const l=document.createElement("img");l.setAttribute("data",c),l.dataset.taskId=t.id,l.dataset.taskProjectId=t.projectId,l.classList.add("edit-task-btn"),l.src="./images/edit-button.svg",i.appendChild(l);const u=document.createElement("img");u.setAttribute("data",c),u.dataset.taskProjectId=t.projectId,u.classList.add("remove-task-btn"),u.src="./images/trash-can.svg",i.appendChild(u),t.id===e&&s.classList.add("selected-task"),n.append(s)}function o(){const e=document.getElementById("taskFormDispBtn"),t=(document.querySelectorAll(".edit-task-btn"),document.getElementById("task-submit-btn")),c=document.getElementById("edit-task-submit-btn"),n=document.getElementById("task-cancel-btn"),s=document.getElementById("edit-task-cancel-btn"),o=document.querySelector(".edit-task-modal"),d=document.querySelector(".new-task-modal"),a=document.querySelector(".overlay");function r(){d.classList.remove("active"),o.classList.remove("active"),a.classList.remove("active")}return e.onclick=function(){d.classList.add("active"),a.classList.add("active"),document.getElementById("taskDescription").focus()},t.onclick=r,c.onclick=r,a.onclick=r,n.addEventListener("click",(()=>{r(),document.getElementById("taskForm").reset()})),s.addEventListener("click",(()=>{r(),document.getElementById("editTaskForm").reset()})),{showEditTaskForm:function(){o.classList.add("active"),a.classList.add("active"),document.getElementById("editTaskDescription").focus()}}}t.addEventListener("click",(t=>{e=t.target.dataset.taskId,n()}));let d=null;const a=document.querySelector("[data-user-projects]"),r=document.querySelector(".all-tasks");let i=[];class l{constructor(e,t){this.id=e,this.projectTitle=t,this.projectTasks=[]}}function u(){const e=document.getElementById("taskProject"),t=document.getElementById("editTaskProject");a.textContent="",e.textContent="",t.textContent="",i.forEach(((e,t)=>{!function(e,t){const c=document.querySelector("[data-user-projects]"),n=document.createElement("div");n.classList.add("user-project"),n.setAttribute("id",`${e.projectTitle}`),n.dataset.projectId=e.id;const s=document.createElement("p");s.classList.add("project-title"),s.innerText=e.projectTitle,n.append(s);const o=document.createElement("img");o.setAttribute("data",t),o.classList.add("remove-project-btn"),o.src="./images/trash-can.svg",n.appendChild(o),e.id===d&&n.classList.add("selected"),c.append(n)}(e,t)})),i.forEach((t=>{let c=document.createElement("option");c.value=t.id,c.innerText=t.projectTitle,c.id=t.projectTitle,e.appendChild(c)})),i.forEach((e=>{let c=document.createElement("option");c.value=e.id,c.innerText=e.projectTitle,c.id=e.projectTitle,t.appendChild(c)})),document.querySelectorAll(".remove-project-btn").forEach((e=>{e.addEventListener("click",(()=>{i.splice(e.getAttribute("data"),1),u(),n()}))}))}if(a.addEventListener("click",(e=>{"div"===e.target.tagName.toLowerCase()&&(d=e.target.dataset.projectId,r.classList.remove("selected"),u(),n())})),r.addEventListener("click",(e=>{d="1",r.classList.add("selected"),u(),n()})),""==i){const e=new l("2","Default");i.push(e);const t=new c("3","Add a project to get started","Now","High","2","Default"),s=i.find((e=>"2"===e.id));s.projectTasks.push(t),u(),n()}!function(){const e=document.getElementById("newProjectBtn"),t=document.getElementById("project-submit-btn"),c=document.getElementById("project-cancel-btn");e.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="block",document.getElementById("newProjectBtn").style.display="none",document.getElementById("projectInput").focus()})),t.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block"})),c.addEventListener("click",(()=>{document.getElementById("projectForm").style.display="none",document.getElementById("newProjectBtn").style.display="block",document.getElementById("projectForm").reset()}))}(),o(),function(){const e=document.querySelector("[data-new-project-form]"),t=document.querySelector("[data-new-project-input]");e.addEventListener("submit",(e=>{if(e.preventDefault(),null==t||""===t)return;let c=Date.now().toString();const n=new l(c,t.value);t.value=null,i.push(n),u()}))}(),function(){const e=document.getElementById("taskForm"),t=document.querySelector("#taskDescription"),s=document.querySelector("#taskDueDate"),o=document.querySelector("#priorityLevel"),d=document.getElementById("taskProject");e.addEventListener("submit",(e=>{e.preventDefault(),null!=t&&""!==t&&(!function(e,t,n,s,o,d){const a=new c(e,t,n,s,o,d);i.find((e=>e.id===o)).projectTasks.push(a)}(Date.now().toString(),t.value,s.value,o.value,d.value,d.options[d.selectedIndex].id),document.getElementById("taskForm").reset(),n())}))}()})();